<!DOCTYPE html>
<html dir="rtl">
<head>
<meta charset="UTF-8">
<title>لوحة التحكم</title>
<style>
body{font-family:Arial;background:#f5f7fa;padding:20px}
.box{background:#fff;padding:20px;border-radius:10px;max-width:800px;margin:auto}
table{width:100%;border-collapse:collapse}
th,td{padding:10px;border:1px solid #ddd;text-align:center}
th{background:#0b1a2e;color:#fff}
button{background:red;color:#fff;border:none;padding:5px 10px}
</style>
</head>
<body>

<div class="box">
<h2>لوحة التحكم</h2>
<p id="status">جاري التحميل...</p>

<table>
<tr>
<th>الاسم</th>
<th>الهاتف</th>
<th>المدينة</th>
<th>حذف</th>
</tr>
<tbody id="orders"></tbody>
</table>

</div>

<script>

// مهم: هذا هو Backend الصحيح
const API = "https://achir-backend.onrender.com/api/orders";

function load(){

fetch(API)
.then(res=>res.json())
.then(data=>{

document.getElementById("status").innerHTML =
"عدد الطلبات: " + data.length;

let html="";

data.forEach(o=>{

html+=`
<tr>
<td>${o.name}</td>
<td>${o.phone}</td>
<td>${o.city}</td>
<td>
<button onclick="del('${o.id}')">حذف</button>
</td>
</tr>
`;

});

document.getElementById("orders").innerHTML=html;

})
.catch(()=>{
document.getElementById("status").innerHTML="فشل الاتصال بالBackend";
});

}

function del(id){

fetch(API+"/"+id,{
method:"DELETE"
})
.then(()=>{
load();
});

}

load();

</script>

</body>
</html>
