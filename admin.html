<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>لوحة تحكم أشير</title>

<style>
body{
font-family:Tajawal;
background:#f1f5f9;
margin:0;
}

.header{
background:#0f172a;
color:white;
padding:20px;
text-align:center;
font-size:22px;
}

.container{
padding:20px;
}

.card{
background:white;
padding:15px;
border-radius:10px;
margin-bottom:15px;
box-shadow:0 0 10px rgba(0,0,0,0.1);
}

input{
width:100%;
padding:10px;
margin-bottom:10px;
}

button{
padding:10px 15px;
border:none;
border-radius:6px;
cursor:pointer;
}

.update{
background:#f97316;
color:white;
}

.export{
background:#16a34a;
color:white;
}

.delete{
background:red;
color:white;
}

table{
width:100%;
border-collapse:collapse;
}

th{
background:#0f172a;
color:white;
padding:10px;
}

td{
padding:10px;
border-bottom:1px solid #ddd;
}

</style>
</head>

<body>

<div class="header">
لوحة تحكم منصة أشير
</div>

<div class="container">

<div class="card">

<input id="search" placeholder="بحث...">

<button class="update" onclick="load()">تحديث</button>

<button class="export" onclick="exportExcel()">Excel تصدير</button>

</div>

<div class="card">

<table>

<thead>
<tr>
<th>الاسم</th>
<th>الهاتف</th>
<th>المدينة</th>
<th>حذف</th>
</tr>
</thead>

<tbody id="data"></tbody>

</table>

</div>

</div>

<script>

function load(){

let orders = JSON.parse(localStorage.getItem("orders")||"[]");

let search = document.getElementById("search").value;

let html="";

orders
.filter(o=>!search || o.name.includes(search))
.forEach((o,i)=>{

html+=`
<tr>
<td>${o.name}</td>
<td>${o.phone}</td>
<td>${o.city}</td>
<td><button class="delete" onclick="del(${i})">حذف</button></td>
</tr>
`;

});

document.getElementById("data").innerHTML=html;

}

function del(i){

let orders = JSON.parse(localStorage.getItem("orders")||"[]");

orders.splice(i,1);

localStorage.setItem("orders",JSON.stringify(orders));

load();

}

function exportExcel(){

let orders = JSON.parse(localStorage.getItem("orders")||"[]");

let csv="الاسم,الهاتف,المدينة\n";

orders.forEach(o=>{
csv+=`${o.name},${o.phone},${o.city}\n`;
});

let blob=new Blob([csv]);

let a=document.createElement("a");

a.href=URL.createObjectURL(blob);

a.download="orders.csv";

a.click();

}

load();

</script>

</body>
</html>
